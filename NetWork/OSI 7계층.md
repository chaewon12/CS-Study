# OSI 7계층?

## OSI 7계층이란?
- OSI 7 계층은 네트워크 프로토콜이 통신하는 구조를 7개의 계층으로 분리하여 각 계층간 상호 작동하는 방식을 정해 놓은 것이다.

### 계층을 왜 나누었을까?
- 통신이 일어나는 과정이 단계별로 파악할 수 있기 때문입니다.
- 만약 계층이 나누어져 있지 않았을 경우 통신 과정에서 오류가 나면 오류를 발견하기가 어렵습니다.
- 계층화된 모델은 각 계층이 특정 기능을 수행하도록 분리함으로써 복잡성을 간소화합니다.

### OSI 7계층 형태
<img src="https://github.com/sohn919/study_repo/assets/84082544/4b0791a5-f9fd-4087-bcd7-4124a402dcb3" width=500px height=600px>

## 1계층 물리 계층
- 물리 계층은 주로 전기적, 기계적인 특성을 이용해서 통신 케이블로 데이터를 전송하게 됩니다.
- 이 계층에서 데이터를 전기신호로 바꾸어 전송하는 역할을 합니다.

### 물리 계층 
<img src="https://github.com/sohn919/study_repo/assets/84082544/ab99d52c-b76d-4881-a7e4-95bb62fd151a" width=500px height=500px>

- 물리 계층에는 이러한 `더미허브` 라는게 있습니다.
- 이것을 통해 다수의 컴퓨터와 연결하여 통신할 수 있습니다.
- 하지만 이러한 `더미허브`는 데이터를 어디로 전송해야 할지 모르게 되거나 데이터의 충돌이 일어나게 됩니다.

## 2계층 데이터링크 계층
- 데이터 링크 계층은 네트워크 기기 간의 데이터 전송, 오류 검출 및 제어, 그리고 흐름 제어 등을 담당하는 역할을 수합니다.

### 2계층이 없다면?
![image](https://github.com/sohn919/study_repo/assets/84082544/e3c21914-c815-4e01-95f0-3d30acea9286)
- 1계층으로만 수신을 한다면 위와 같이 데이터를 어디로 전송해야 할지 모르고 모든 곳에 데이터를 전송하게 됩니다.

### 2계층이 있다면?
![image](https://github.com/sohn919/study_repo/assets/84082544/f1e31539-e970-466f-b07a-b32ac7aa510d)
- 2계층이 있다면 스위치(2계층 장비) 를 통해 어디로 데이터를 전송해야 하는지 알 수 있게 됩니다.

### 2계층 프로토콜 (Ethernet)
![image](https://github.com/sohn919/study_repo/assets/84082544/e399bb67-eb66-4ee9-b20f-1ebca0fe3a25)
- DA, SA : 각각의 도착지와 출발지의 맥 주소를 의미합니다.
- Type / Length : 상위계층의 프로토콜 종류 표시, 데이터 영역의 길이를 표시를 의미합니다.

## 3계층 네트워크 계층
- 이 계층은 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 기능을 합니다.

### 3계층 장비(라우터)
![image](https://github.com/sohn919/study_repo/assets/84082544/ffc69a0d-bad4-4db1-b77a-93e1d8b2c36d)
- 라우터가 있기 때문에 멀리있는 곳까지 데이터가 전송이 가능하다.

### 3계층 프로토콜 (IP)
![image](https://github.com/sohn919/study_repo/assets/84082544/f49ec95d-aa9e-4ae0-856f-cb001453f291)
- Source IP Address : 출발지 주소
- Destination IP Address : 도착지 주소
- Protocol ID : 상위계층의 프로토콜 종류 표시

### 3계층 (IP) 가 필요한 이유?
- IP는 라우팅 기법에 사용하며 IP를 통해 최단 경로를 선택하여 데이터를 전송하게 된다. 목적지 라우터에서는 IP 주소를 MAC 주소로 변환하여 해당 장치에 데이터를 전송하게 됩니다.
- MAC 주소로만 통신을 하게되면 라우터에서는 모든 MAC 주소를 가지고 최적의 경로를 찾고 있어야 합니다. IP 주소는 계층적인 구조이기에 빠르게 경로를 찾을 수 있지만 MAC 주소는 그러하지 못합니다.
```
예시

주민등록번호(MAC 주소) : 나를 식별하는 번호

주소(IP) : 나의 위치를 표현

주소는 시/구/동 형태로 나타내며 계층적인 형태입니다. 
여러 지역 중에 빠르게 해당하는 시를 찾고 그 뒤에 구, 동을 찾아 나의 위치를 빠르게 찾아 낼 수 있으며 위치를 찾은 후 나를 식별하기 위해서는 주민등록번호를 사용하여 식별합니다.
```
## 4계층 전송 계층
- 데이터는 목적지의 상대 컴퓨터에서 포트 번호를 확인하고 가야 애플리케이션을 찾아갈 수 있다. 그래서 전송계층에서는 데이터가 상대 응용계층을 정확하게 찾아갈 수 있도록 포트 번호를 달아준다.

### 4계층 프로토콜(TCP)
![image](https://github.com/sohn919/study_repo/assets/84082544/ba2946a7-d116-470e-8919-5f88f9bbc20b)
- Source Port : 출발지 포트번호
- Destination Port : 목적지 포트번호
- Window Size : 대상이 승인하는 데이터 양을 지정합니다.

### 4계층 (TCP) 가 필요한 이유?
![image](https://github.com/sohn919/study_repo/assets/84082544/07c06c5f-e7c9-415b-bafb-a84ab8d429b4)
- 위에 있는 그림과 같이 하나의 IP(3계층)에서 여러 애플리케이션의 요청을 하게 된다면 어떠한 애플리케이션으로 데이터를 전송해야 할지 모르게 됩니다.

![image](https://github.com/sohn919/study_repo/assets/84082544/ddb4adfb-a2c7-4c95-97f3-d5c5c7a80a8f)
- 하지만 이렇게 포트번호를 지정하게 된다면 어떤 애플리케이션의 요청인지 알게 되어 어디로 데이터를 전송해야 할지 알게 됩니다.

## 5계층 세션 계층
- 세션 계층은 네트워크 상에서 양쪽의 연결을 관리하고 연결을 지속시켜주는 계층이다.
- 세션 계층은 데이터가 오고 가는 흐름 내에서 동기화 지점을 제공합니다.
```
예시

5MB마다 동기화 지점이 설정되어있는 50MB 파일을 보낸다고 했을 때 어떤 오류로 인해 23MB 만 전송되고 중돤되었다면 보통의 경우 처음부터 전송해야한다.
하지만 세션 계층에서 동기화 지점을 5MB로 지정했기에 20MB 부터 재전송이 가능하다.
```

## 6계층 표현 계층
- 응용 계층에서 내린 명령 또는 발송한 데이터를 어떻게 표현할지 정해주는 계층입니다.
- 인코딩과 디코딩의 역할을 하는 곳입니다.
- 7계층의 데이터(사람의 언어)를 그대로 6계층에 데이터를 내려주는데 6계층은 다른 컴퓨터와 호환할 수 있도록 공통된 표준 형식에 맞춰 데이터를 인코딩, 디코딩 해줍니다.
- 이러한 인코딩과 디코딩이 되는 원리를 저장하기 위해 매칭한 표가 있는데 이를 `문자 집합` 이라고 하며 `UTF-8`, `Unicode` 와 같은게 있습니다.

## 7계층 응용 계층
- OSI 모델의 최상위 계층으로 시스템 간의 응용 처리는 상호 간에 통신하면서 일련의 업무를 처리할 수 있도록 필요한 서비스 기능을 제공한다.
- 이메일, 파일 전송, 웹 사이트 조회 등 어플리케이션에 대한 서비스를 제공하는 계층이다.
- 대표적인 프로토콜로는 `HTTP` 가 있으며 웹 서비스에서 클라이언트(웹 브라우저)와 웹 서버 간에 정보를 주고받기 위해 사용되는 네트워크 프로토콜입니다.

### Reference
- [OSI 7계층이란? (1계층, 2계층)](https://rf-yeolmu.tistory.com/138)
- [OSI 7계층](https://velog.io/@jack_whiteblack/OSI-7-%EA%B3%84%EC%B8%B5)
- [모든 개발자를 위한 HTTP 웹 기본 지식](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard)